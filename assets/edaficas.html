<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Formulario condiciones edáficas</title>
  <link rel="stylesheet" href="../CSS/condicionesambientales_style.css" />
  <style>
    .error-message {
      color: red;
      font-size: 0.85em;
      display: none;
      margin-top: 0;
      /* Reduce el margen superior */
      margin-bottom: 0.3em;
      /* Ajuste para mayor proximidad */
      line-height: 1.2;
      /* Asegura que el texto no quede demasiado separado */
    }
  </style>
</head>

<body>
  <div class="container"> <!-- Empieza la clase container -->
    <form class="form" id="edaficasForm" novalidate> <!-- Empieza la clase form -->
      <h2>CONDICIONES EDÁFICAS DEL TERRENO</h2>

      <p>
        Estimado usuario, por favor complete los siguientes campos con la información correspondiente sobre las
        condiciones edáficas de su terreno. Recuerde que debe ingresar los valores promedio.
        En caso de no conocer alguna o ninguna de las variables, puede solicitar una caracterización edáfica.
      </p>

      <label for="ph">pH</label>
      <input type="text" id="ph" name="ph" class="box" required placeholder="Ingrese el pH"
        aria-describedby="ph-error" />
      <div id="ph-error" class="error-message">El pH debe estar entre 0 y 14.</div>
      <div id="ph-error-general" class="error-message">El pH debe ser un número entre 0 y 14. No se permiten letras.
      </div>

      <label for="contenido_agua">Contenido volumétrico de agua (%)</label>
      <input type="text" id="contenido_agua" name="contenido_agua" class="box" required
        placeholder="Ingrese el contenido de agua" aria-describedby="contenido_agua-error">
      <div id="contenido_agua-error" class="error-message">Solo se permiten números y puntos.</div>

      <label for="capa_organica">Capa orgánica (%)</label>
      <input type="text" id="capa_organica" name="capa_organica" class="box" required
        placeholder="Ingrese la capa orgánica" aria-describedby="capa_organica-error">
      <div id="capa_organica-error" class="error-message">Solo se permiten números y puntos.</div>

      <label for="porosidad">Porosidad (%)</label>
      <input type="text" id="porosidad" name="porosidad" class="box" required placeholder="Ingrese la porosidad"
        aria-describedby="porosidad-error">
      <div id="porosidad-error" class="error-message">Solo se permiten números y puntos.</div>

      <label for="textura">Textura</label>
      <input type="text" id="textura" name="textura" class="box" required minlength="3" maxlength="100"
        placeholder="Ingrese la textura" aria-describedby="textura-error">
      <div id="textura-error" class="error-message">La textura no debe contener números.</div>

      <label for="nivel_freatico">Nivel freático</label>
      <input type="text" id="nivel_freatico" name="nivel_freatico" class="box" required minlength="3" maxlength="100"
        placeholder="Ingrese el nivel freático" aria-describedby="nivel_freatico-error">
      <div id="nivel_freatico-error" class="error-message">El nivel freático no debe contener números.</div>

      <label for="color">Color</label>
      <input type="text" id="color" name="color" class="box" required minlength="3" maxlength="100"
        placeholder="Ingrese el color" aria-describedby="color-error">
      <div id="color-error" class="error-message">El color no debe contener números.</div>

      <label for="microbiota">Microbiota</label>
      <input type="text" id="microbiota" name="microbiota" class="box" required minlength="3" maxlength="100"
        placeholder="Ingrese la microbiota" aria-describedby="microbiota-error">
      <div id="microbiota-error" class="error-message">La microbiota no debe contener números.</div>

      <label for="fauna_edafica">Fauna edáfica</label>
      <input type="text" id="fauna_edafica" name="fauna_edafica" class="box" required minlength="3" maxlength="100"
        placeholder="Ingrese la fauna edáfica" aria-describedby="fauna_edafica-error">
      <div id="fauna_edafica-error" class="error-message">La fauna edáfica no debe contener números.</div>

      <div style="text-align: center;"> <!-- Clase button con estilo para hacer los botones que necesitemos -->
        <button type="submit" class="button">Guardar y continuar</button>
        <button type="button" class="button" onclick="window.location.href='confirmacionsolicitud.html';">Solicitar
          caracterización edáfica</button>
      </div>

    </form> <!-- Finaliza la clase form -->




    <div class="info">
      <!-- Empieza la clase info, donde están el logo de SIS Sune y los iconos de las redes sociales -->
      <img src="../assets/IMG/logosissune.png" class="img-1" alt="Logo SIS Sune">

      <div class="location"> <!-- Empieza la clase location -->

        <div class="icons">
          <a href="https://wa.me/message/Q6QLO32DTIXOB1" target="_blank" rel="noopener noreferrer">
            <img src="../assets/IMG/whatsapp.png" alt="Whatsapp Icon">
          </a>
          <p>321 3568598</p>
        </div>


        <div class="icons">
          <a href="mailto:sissunecolombia@gmail.com?subject=Asunto del correo&body=Escribe tu mensaje aquí">
            <img src="../assets/IMG/gmail.png" alt="Gmail Icon">
          </a>
          <p>sissunecolombia@gmail.com</p>
        </div>


        <div class="icons">
          <a href="https://www.instagram.com/sissunecolombia?igsh=a2JldzNwMXg2eTZl" target="_blank"
            rel="noopener noreferrer">
            <img src="../assets/IMG/instagram.png" alt="Instagram Icon">
          </a>
          <p>@sissunecolombia</p>
        </div>


        <div class="icons">
          <a href="https://www.facebook.com/profile.php?id=61568368243077&mibextid=ZbWKwL" target="_blank">
            <img src="../assets/IMG/facebook.png" alt="Facebook Icon">
          </a>
          <p>fb/sissunecolombia</p>
        </div>


        <div class="icons">
          <a href="https://x.com/sissunecolombia" target="_blank">
            <img src="../assets/IMG/twitter.png" alt="Twitter Icon">
          </a>
          <p>x/sissunecolombia</p>
        </div>

      </div> <!-- Finaliza la clase location -->
    </div> <!-- Finaliza la clase info -->
  </div> <!-- Finaliza la clase container -->






  <script> // Ahora usaremos lenguaje JavaScript para hacer las validaciones de los campos

    // Función de validación para permitir solo números y puntos
    function validateNumberAndDot(event) {
      const input = event.target;
      const value = input.value;
      const errorDiv = document.getElementById(input.id + '-error');

      // Validación de letras y caracteres no numéricos
      if (/[^0-9.]/.test(value)) {
        input.value = value.replace(/[^0-9.]/g, ''); // Eliminar caracteres no numéricos
        errorDiv.textContent = "Solo se permiten números y puntos.";
        errorDiv.style.display = 'block';  // Mostrar el mensaje de error
      } else {
        errorDiv.style.display = 'none';  // Ocultar el mensaje de error si es válido
      }
    }

    // Validación de rango para el campo pH
    function validatePHRange(event) {
      const input = event.target;
      const value = parseFloat(input.value);
      const errorDiv = document.getElementById(input.id + '-error');
      const errorGeneralDiv = document.getElementById(input.id + '-error-general');

      // Si el valor es NaN (no un número) o está fuera del rango 0-14
      if (isNaN(value) || value < 0 || value > 14) {
        input.value = ''; // Resetea el valor o lo deja en blanco
        errorDiv.style.display = 'block';
        errorGeneralDiv.style.display = 'none'; // Desactivar el mensaje general
      } else if (/[^0-9.]/.test(input.value)) {
        errorDiv.style.display = 'none';
        errorGeneralDiv.style.display = 'block'; // Mostrar el mensaje general
      } else {
        errorDiv.style.display = 'none';
        errorGeneralDiv.style.display = 'none';
      }
    }

    // Asignar la validación a los campos
    document.getElementById('ph').addEventListener('input', validateNumberAndDot);  // Validación de letras y caracteres no numéricos para pH
    document.getElementById('ph').addEventListener('input', validatePHRange);  // Validación de rango para pH

    // Añadir validación de números y puntos a los otros campos
    document.getElementById('contenido_agua').addEventListener('input', validateNumberAndDot);
    document.getElementById('capa_organica').addEventListener('input', validateNumberAndDot);
    document.getElementById('porosidad').addEventListener('input', validateNumberAndDot);

    // Validaciones de texto para los campos que no deben contener números
    document.getElementById('textura').addEventListener('input', function (event) {
      if (/\d/.test(event.target.value)) {
        document.getElementById('textura-error').style.display = 'block';
      } else {
        document.getElementById('textura-error').style.display = 'none';
      }
    });

    document.getElementById('nivel_freatico').addEventListener('input', function (event) {
      if (/\d/.test(event.target.value)) {
        document.getElementById('nivel_freatico-error').style.display = 'block';
      } else {
        document.getElementById('nivel_freatico-error').style.display = 'none';
      }
    });

    document.getElementById('color').addEventListener('input', function (event) {
      if (/\d/.test(event.target.value)) {
        document.getElementById('color-error').style.display = 'block';
      } else {
        document.getElementById('color-error').style.display = 'none';
      }
    });

    document.getElementById('microbiota').addEventListener('input', function (event) {
      if (/\d/.test(event.target.value)) {
        document.getElementById('microbiota-error').style.display = 'block';
      } else {
        document.getElementById('microbiota-error').style.display = 'none';
      }
    });

    document.getElementById('fauna_edafica').addEventListener('input', function (event) {
      if (/\d/.test(event.target.value)) {
        document.getElementById('fauna_edafica-error').style.display = 'block';
      } else {
        document.getElementById('fauna_edafica-error').style.display = 'none';
      }
    });



    // Esta parte es para que el boton Enviar solo esté habilitado si TODOS los campos estan completamente rellenados
    document.getElementById('edaficasForm').addEventListener('submit', function (event) {
      const form = event.target;

      // Verifica la validez del formulario
      if (form.checkValidity()) {
        // Redirige a la URL deseada si el formulario es válido
        event.preventDefault(); // Prevenir el comportamiento por defecto del formulario
        window.location.href = 'topograficas.html';
      } else {
        // Prevenir el envío del formulario si hay errores
        event.preventDefault();
        alert('Por favor, rellene todos los campos del formulario para poder continuar.');
      }
    });



  </script>

</body>

</html>